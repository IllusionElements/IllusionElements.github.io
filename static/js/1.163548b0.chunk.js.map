{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/spinner.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","components/index.js"],"names":["__webpack_require__","d","__webpack_exports__","_objectSpread","_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","Symbol","iterator","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","Fallback","withStyles","theme","progress","margin","spacing","unit","props","classes","react_default","a","createElement","index_es","item","className","strings","raw","slice","freeze","defineProperties","MESSAGE_QUERY","gql","_templateObject","Message","lazy","e","then","bind","withRoute","_ref3","variables","message","limit","userId","match","params","id","react_apollo_browser_umd","query","_ref","loading","_ref$data","data","userMessages","fetchMore","error","spinner","console","_userMessages$user","user","username","picture","offset","messages","log","direction","alignItems","container","Suspense","fallback","variant","src","alt","onClick","URL","window","location","href","pathname","replace","updateQuery","prev","_ref2","fetchMoreResult","assign","SendMessages","Route","path","Promise","resolve","SendMessage","react"],"mappings":"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","file":"static/js/1.163548b0.chunk.js","sourcesContent":["import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import React from \"react\"\nimport { withStyles, CircularProgress, Grid } from \"@material-ui/core\"\n\nconst styles = theme => ({\n  progress: {\n    margin: theme.spacing.unit * 2,\n  },\n})\n\nconst Fallback = withStyles(styles)(props => {\n  const { classes } = props\n  return (\n    <Grid item>\n      <CircularProgress className={classes.progress} />\n    </Grid>\n  )\n})\n\nexport default Fallback\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import React, { Suspense, lazy } from \"react\"\nimport { Route } from \"react-router-dom\"\nimport { Query } from \"react-apollo\"\nimport { Button, Typography, Grid } from \"@material-ui/core\"\nimport Fallback from \"./spinner\"\nimport gql from \"graphql-tag\"\nconst MESSAGE_QUERY = gql`\n  query GetMessages($message: MessageParams!) {\n    userMessages(params: $message) {\n      offset\n      user {\n        username\n        picture\n      }\n      messages {\n        _id\n        date\n        type\n        text\n      }\n    }\n  }\n`\n\nconst Message = lazy(() => import(\"./Message\"))\n\nconst withQuery = loadMore => ({\n  loading,\n  data,\n  data: { userMessages } = {},\n  fetchMore,\n  error,\n}) => {\n  if (loading) {\n    return <Fallback />\n  }\n\n  if (error) {\n    console.error(error)\n    return <h1>{error.message}</h1>\n  }\n  const {\n    user: { username, picture },\n    offset,\n    messages,\n  } = userMessages\n  console.log(offset)\n\n  function load() {\n    const message = {\n      limit: 20,\n      userId: new URL(window.location.href).pathname.replace(\n        /\\/messages\\//,\n        \"\"\n      ),\n      offset: offset,\n    }\n    return fetchMore({\n      variables: {\n        message,\n      },\n      query: MESSAGE_QUERY,\n      updateQuery: (prev, { fetchMoreResult }) => {\n        if (!fetchMoreResult) return prev\n        console.log({ fetchMoreResult })\n        return {\n          userMessages: Object.assign({}, prev.userMessages, {\n            offset: fetchMoreResult.userMessages.offset,\n            messages: [\n              ...prev.userMessages.messages,\n              ...fetchMoreResult.userMessages.messages,\n            ],\n          }),\n        }\n      },\n    })\n  }\n\n  return (\n    <Grid direction=\"column\" spacing={32} alignItems=\"center\" container>\n      <React.Suspense fallback={<Fallback />}>\n        <Grid item>\n          <Typography variant=\"h3\">{`${username}'s Messages`}</Typography>\n        </Grid>\n        <Grid item>{picture && <img src={picture} alt={username} />}</Grid>\n        <Grid item>\n          <Message messages={messages} />\n        </Grid>\n        <Button onClick={load}>More</Button>\n      </React.Suspense>\n    </Grid>\n  )\n}\nconst withRoute = ({ match: { params } }) => {\n  const variables = {\n    message: {\n      limit: 20,\n      userId: params.id,\n    },\n  }\n\n  const fetchMore = get => ({ variables: vars, ...args }) =>\n    get({\n      variables: {\n        message: {\n          ...variables,\n          ...vars,\n        },\n      },\n      ...args,\n    })\n\n  return (\n    <Query query={MESSAGE_QUERY} variables={variables}>\n      {withQuery(fetchMore)}\n    </Query>\n  )\n}\n\nexport default () => <Route path=\"/messages/:id\">{withRoute}</Route>\n\nconst SendMessages = lazy(() => import(\"./SendMessage\"))\nexport const SendMessage = () => (\n  <Suspense fallback={<Fallback />}>\n    <SendMessages />\n  </Suspense>\n)\n"],"sourceRoot":""}